{% extends "layout_user.html.twig" %}

{% block title %}Cafe{% endblock %}

{% block content %}
    <h1 class="text-center rosed mb-4">Cafe</h1>

    {% if form is defined %}
     {% include 'cafe/_form.html.twig' %}
    {% endif %}
    {% if currentCafe is defined %}
        <h5 class="text-center blued" id="myCafe">Your cafe</h5>
        <div class="row " id="div-cafe-timer{{ currentCafe.id }}" data-value="myCafe">
            <div class="col-md-6 offset-3 border-deal">
                <div class="row my-2">
                    <div class="col-md-3 ">
                        <img src="{{ currentCafe.createdBy.photoProfile() }}" alt="" class="cafe-avatar mt-1">
                        <div class="pt-4">
                            <span class="blued  ml-2">{{ currentCafe.createdBy.firstname|title }}</span>
                        </div>
                    </div>
                    <div class="col-md-3 mt-3">
                        {% if currentCafe.type is same as('Cafe') %}
                            <span id="cafe-icones"><i class="fas fa-coffee rosed"></i> {{ currentCafe.type }}</span>
                        {% elseif currentCafe.type is same as('Beer') %}
                            <span id="cafe-icones"><i class="fas fa-wine-glass-alt rosed"></i> {{ currentCafe.type }}</span>
                        {% else %}
                            <span id="cafe-icones"><i class="fas fa-walking rosed"></i> {{ currentCafe.type }}</span>
                        {% endif %}
                    </div>
                    <div class="col-md-3 mt-4 text-center">
                        <div class="cafe-timer" id="cafe-timer{{ currentCafe.id }}">
                            <input type="hidden" name="expiresTime"  value="{{ currentCafe.expireAt|date }}">
                            <span class="rosed ">Expires in </span>
                            <span class="hours"></span>
                            <span class="minutes"></span>
                            <span class="seconds"></span>
                        </div>
                    </div>
                    <div class="col-md-3 mt-3">
                        <form method="post" action="{{path('cafe_index')}}" id="cafe_deactivate">
                            <button class="btn btn-danger btn-block" id="btn-cafe_deactivate" >
                                <input type="hidden" name="lat" id="cafe_deactivate_gps_lat">
                                <input type="hidden" name="lng" id="cafe_deactivate_gps_lng">
                                <input type="hidden" name="currentCafe" id="cafe_deactivate_gps_cafe" value="{{ currentCafe.id }}">
                                <i class="fas fa-trash"></i>
                                <span class="nav-label">Delete</span>
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    {% endif %}
    {% if areaCafes is defined %}
    {% if areaCafes is not empty %}
        <hr>
        <h5 class="text-center blued mt-4" id="anotherCafe">Another cafe</h5>
        {% for cafe in areaCafes %}
        <div class="row anotherCafe" id="div-cafe-timer{{ cafe.id }}" >
            <div class="col-md-6 offset-3 border-deal">
                <div class="row my-2">
                    <div class="col-md-3 ">
                        <img src="{{ cafe.createdBy.photoProfile() }}" alt="" class="cafe-avatar mt-2">
                        <div class="pt-3">
                            <span class="blued  ml-2">{{ cafe.createdBy.firstname }}</span>
                        </div>
                    </div>
                    <div class="col-md-3 mt-3">
                        {% if cafe.type is same as('Cafe') %}
                            <span id="cafe-icones"><i class="fas fa-coffee rosed"></i> {{ cafe.type }}</span>
                        {% elseif cafe.type is same as('Beer') %}
                            <span id="cafe-icones"><i class="fas fa-wine-glass-alt rosed"></i> {{ cafe.type }}</span>
                        {% else %}
                            <span id="cafe-icones"><i class="fas fa-walking rosed"></i> {{ cafe.type }}</span>
                        {% endif %}                    </div>
                    <div class="col-md-3 mt-4 text-center">
                        <div class="cafe-timer" id="cafe-timer{{ cafe.id }}">
                            <input type="hidden" name="expiresTime" value="{{ cafe.expireAt|date }}">
                            <span class="rosed ">Expires in </span>
                            <span class="hours"></span>
                            <span class="minutes"></span>
                            <span class="seconds"></span>
                        </div>
                    </div>
                    <div class="col-md-3 mt-3">
                        <form method="post" action="{{ url('new_conversation') }}" class="cafe-message">
                            <button class="btn btn-info btn-block" >
                                <input type="hidden" name="user" value="{{ cafe.createdBy.id }}">
                                <p class="mt-1">Message</p>
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    {% else %}
        <h4 class="text-center blued mt-4">There is no invitations in your area</h4>
    {% endif %}
    {% endif %}
    {% if form is not defined and areaCafes is not defined and currentCafe is not defined %}
    <h4 class="text-center blued">{{error}}</h4>
    {% endif %}
{% endblock %}
