<div id="message-center">
    {% if form is defined or threads is not empty %}
        <div class="d-none d-sm-block">
                <h5 class="blued text-center">{% trans%}Message center{% endtrans %}</h5>
            <div class="row border-driver">
                <div class="col-sm-4 col-xl-3" id="big-messenger">
                    <div class="nav flex-column nav-pills py-2" id="v-pills-tab" role="tablist" aria-orientation="vertical">
                        {% if form is defined %}
                            <a class="nav-link active new-conversation mb-1" id="v-pills-home-tab" data-toggle="pill" href="#user-{{ recipient.id }}" role="tab" aria-controls="v-pills-home" aria-selected="true">
                                <div class="btn-group message-link">
                                    <img src="{{ asset(recipient.photoProfile()) }}" class="user-image photo-small-message mr-2" ><br>
                                    <span class="ml-2 mt-3 float-right ">{{ recipient.firstname|title }}</span>
                                </div>
                                <br>
                            </a>
                        {% endif %}
                        {% if threads%}
                            {% for thread in threads %}
                                <a class="nav-link {% if thread.id is same as (threads[0].id) and form is not defined %}{{ ' active ' }}{% endif %} mb-1 thread-link" id="v-pills-home-tab" data-toggle="pill" href="#user-{{thread.getOtherParticipants(app.user)[0].id}}" role="tab" aria-controls="v-pills-home" aria-selected="true" data-idOfThread="{{ thread.id }}">
                                    <div class="row">
                                        <div class="col-12">
                                            <div class="btn-group message-link">
                                                {% if thread.createdBy is not same as (app.user) %}
                                                    <img src="{{ thread.createdBy.photoProfile() }}" class="user-image photo-small-message mr-2" ><br>
                                                {% else %}
                                                    <img src="{{ asset(thread.getOtherParticipants(app.user)[0].photoProfile) }}" class="user-image photo-small-message mr-2" ><br>
                                                {% endif %}
                                                {% set name = thread.getOtherParticipants(app.user)[0].firstname|title  %}
                                                <span class="ml-2 mt-3 float-right ">{{ name|length > 11 ? name|slice(0, 11) ~ '...' : name }}</span>
                                            </div>
                                            <div class="btn-group float-right">
                                                <div id="first-message-{{ thread.id }}">
                                                    {% if unReadMessages[thread.id] %}
                                                        <p id="new-message-{{ thread.id }}" class="new-message">
                                                            {{ unReadMessages[thread.id] }}
                                                        </p>
                                                    {% endif %}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </a>
                            {% endfor %}
                        {% endif %}
                    </div>
                </div>
                <div class="col-sm-8 col-xl-9 py-2">
                    <div class="tab-content " id="v-pills-tabContent">
                        {% if form is defined %}
                            {% include '@FOSMessageBundle/Message/thread_form.html.twig' with {'recipient': recipient} %}
                        {% endif %}
                        {% if threads%}
                            {% include '@FOSMessageBundle/Message/thread_content.html.twig' with {'threads': threads} %}
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>

        <div class="d-sm-none d-block">
            <div class="row">
                <div class="col-12 border-driver py-2">
                    <div  id="small-messenger">
                        {% if haveConversation is defined%}
                            <div class="row">
                                <div class="col-4 back-message">
                                    <a href="{{path('message_index')}}"><i class="fas fa-arrow-left rosed"></i></a>
                                </div>
                                <div class="col-8">
                                    <h5 class="blued">{% trans%}Message center{% endtrans %}</h5>
                                </div>
                            </div>
                            {% if form is defined %}
                                {% include '@FOSMessageBundle/Message/thread_form.html.twig' with {'recipient': recipient} %}
                            {% else %}
                                {% include '@FOSMessageBundle/Message/thread_content.html.twig' with {'threads': haveConversationThread} %}
                            {% endif %}
                        {% else %}
                            <h5 class="blued text-center">{% trans%}Message center{% endtrans %}</h5>
                            <div id="small-thread-list">
                                {% for thread in threads %}
                                    <a class="nav-link mb-1 thread-link" href="{{path('showThreadExist',{'thread': thread.id} )}}" data-idOfThread="{{ thread.id }}">
                                        <div class="btn-group message-link">
                                            {% if thread.createdBy is not same as (app.user) %}
                                                <img src="{{ thread.createdBy.photoProfile() }}" class="user-image photo-small-message mr-2" ><br>
                                            {% else %}
                                                <img src="{{ asset(thread.getOtherParticipants(app.user)[0].photoProfile) }}" class="user-image photo-small-message mr-2" ><br>
                                            {% endif %}
                                            <span class="ml-2 mt-3 float-right ">{{ thread.getOtherParticipants(app.user)[0].firstname|title }}</span>
                                        </div>
                                        <div class="btn-group float-right">
                                            <div id="small-first-message-{{ thread.id }}">
                                                {% if unReadMessages[thread.id] %}
                                                    <p id="small-new-message-{{ thread.id }}" class=" ml-2 mt-4 float-right new-message ">
                                                        {{ unReadMessages[thread.id] }}
                                                    </p>
                                                {% endif %}
                                            </div>
                                        </div>
                                        <br>
                                    </a>
                                {% endfor %}
                            </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    {% else %}
        <div class="mt-5">
            <h4 class="rosed text-center">{% trans %} There is no conversations{% endtrans %}</h4>
        </div>
    {% endif %}
</div>



















{#<div id="message-center">
    {% if form is defined or threads is not empty %}
    <div class="row">
        <div class="col-3">
            <div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical">
                {% if form is defined %}
                        <a class="nav-link active new-conversation" id="v-pills-home-tab" data-toggle="pill" href="#user-{{ recipient.id }}" role="tab" aria-controls="v-pills-home" aria-selected="true">
                            <div class="btn-group message-link ">
                                <img src="{{ asset(recipient.photoProfile()) }}" class="user-image photo-message mr-2 " ><br>
                                <span class="ml-2 mt-4">{{ recipient.firstname|title }} {{ ' ' }}{{ recipient.lastname }}</span>
                            </div>
                        </a>
                {% endif %}
                {% if threads%}
                {% for thread in threads %}
                        <a class="nav-link {% if thread.id is same as (threads[0].id) and form is not defined %}{{ ' active ' }}{% endif %} mb-1 thread-link" id="v-pills-home-tab" data-toggle="pill" href="#user-{{thread.getOtherParticipants(app.user)[0].id}}" role="tab" aria-controls="v-pills-home" aria-selected="true" data-idOfThread="{{ thread.id }}">
                            <div class="btn-group message-link">
                                {% if thread.createdBy is not same as (app.user) %}
                                    <img src="{{ thread.createdBy.photoProfile() }}" class="user-image photo-message mr-2" ><br>
                                {% else %}
                                    <img src="{{ asset(thread.getOtherParticipants(app.user)[0].photoProfile) }}" class="user-image photo-message mr-2" ><br>
                                {% endif %}
                                <span class="ml-2 mt-4 float-right ">{{ thread.getOtherParticipants(app.user)[0].firstname|title }}{{ ' ' }}{{ thread.getOtherParticipants(app.user)[0].lastname }}</span>
                            </div>
                            <div class="btn-group float-right">
                                <div id="first-message-{{ thread.id }}">
                                    {% if unReadMessages[thread.id] %}
                                        <p id="new-message-{{ thread.id }}" class=" ml-2 mt-4 float-right new-message ">
                                            {{ unReadMessages[thread.id] }}
                                        </p>
                                    {% endif %}
                                </div>
                            </div>
                            <br>
                        </a>
                {% endfor %}
                {% endif %}
            </div>
        </div>
        <div class="col-9">
            <div class="tab-content " id="v-pills-tabContent">
                {% if form is defined %}
                    {% include '@FOSMessageBundle/Message/thread_form.html.twig' with {'recipient': recipient} %}
                {% endif %}
                {% if threads%}
                    {% include '@FOSMessageBundle/Message/thread_content.html.twig' with {'threads': threads} %}
                {% endif %}
            </div>
        </div>
    </div>
    {% else %}
        <div class="mt-5">
            <h4 class="rosed text-center">{% trans %} There is no conversations{% endtrans %}</h4>
        </div>
    {% endif %}
</div>#}
