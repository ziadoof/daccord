{% extends "layout_user.html.twig" %}
{% block content %}
    {% if meetups is defined %}
        {% for meetup in meetups %}
        <div class="row">
            <div class="col-md-12 px-2">
                <div id="meetup_index" class="meetup_index">
                    <a href="{{ path('meetup_show', {'id': meetup['id']}) }}">
                        <div class="px-2 border-deal">
                            <div class="row">
                                <div class="col-md-3 my-1 image_meetup_index">
                                    <img class="" src="{{ meetup['image'] }}" alt="meetup image"/>
                                </div>
                                <div class="col-md-8 float-left py-2">
                                    <div class="">
                                        <h4 class="meetup-text rosed">{{ meetup['title'] }}</h4>
                                    </div>
                                    <div class="">
                                        <span class=" mt-3"><span class="blued">{% trans %} Type :{% endtrans %} </span>{{ meetup['type'] }}</span>
                                    </div>
                                    <div class="">
                                        <span class=" mt-3"><span class="blued">{% trans %} Start at : {% endtrans %}</span>{{ meetup['start'] }}</span>
                                    </div>
                                    <div class="">
                                        <span class=" mt-3"><span class="blued">{% trans %} City : {% endtrans %}</span>{{ meetup['city'] }}</span>
                                    </div>
                                </div>
                                {% if meetup['finish'] %}
                                    <div class="col-md-1">
                                        <span class="badge badge-danger float-right mt-2">{% trans %} Finish{% endtrans %}</span>
                                    </div>
                                {% else %}
                                    <div class="col-md-1">
                                    </div>
                                {% endif %}
                                <div class="col ">
                                    {% set isFavorite = 'false' %}
                                    {#data-favorite must be string not boolean#}
                                    {% for favorite in app.user.getFavoritesByType('meetup')  %}
                                        {% if favorite.meetup.id is same as (meetup['id']) %}
                                            {% set isFavorite = 'true' %}
                                        {% endif %}
                                    {% endfor %}
                                    <form method="post" action="{{ url('favorite_add') }}" class="js-favorite-add  float-right mr-2 mb-2" data-object="{{ meetup['id'] }}" data-type="meetup" data-favorite="{{ isFavorite }}">
                                        <div class="flexbox">
                                            <div class="fav-btn">
                                                <span class="fas fa-heart  favme dashicons dashicons-heart  {% if isFavorite is same as ('true') %} {{'active'}} {% endif %}"></span>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </a>
                </div>
            </div>
        </div>
    {% endfor %}
        <div class="pagination-search row justify-content-center mt-4">
            <div class="navigation">
                {{ knp_pagination_render(meetups) }}
            </div>
        </div>
    {% endif %}
{% endblock %}